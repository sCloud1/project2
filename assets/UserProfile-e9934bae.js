import{_ as v}from"./PageItem-92dc55ee.js";import{A as k,q as i,R as b,o as x,a as E,w as o,v as l,x as f,bG as V,E as I,a0 as w}from"./index-d78cd1ea.js";import{E as U,a as y}from"./el-form-item-c2153231.js";import{E as B}from"./plugin-vueexport-helper-f207eb5f.js";import{E as N}from"./el-input-8390a414.js";import{E as F}from"./el-message-box-41af4a0d.js";import"./el-overlay-ba22cb7e.js";import"./baseClone-10758ba4.js";const D={__name:"UserProfile",setup(T){const n=k(),e=i({loginName:n.userInfo.username,nickname:"",email:""});b(()=>{e.value.nickname=n.userInfo.nickname,e.value.email=n.userInfo.email});const _=i({nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确格式的邮箱地址",trigger:"blur"}]}),r=i(null),p=async u=>{await F.confirm(`您确认要${u}吗`,"温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),u==="提交"?(await r.value.validate(),await V({id:n.userInfo.id,nickname:e.value.nickname,email:e.value.email}),await n.getUserInfo(),I.success("修改信息成功")):w(()=>{r.value.resetFields()})};return(u,a)=>{const s=N,m=U,d=B,c=y,g=v;return x(),E(g,{title:"用户资料"},{content:o(()=>[l(c,{model:e.value,rules:_.value,ref_key:"formRef",ref:r,"label-width":"100px"},{default:o(()=>[l(m,{label:"登录名称",prop:"loginName"},{default:o(()=>[l(s,{modelValue:e.value.loginName,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.loginName=t),disabled:""},null,8,["modelValue"])]),_:1}),l(m,{label:"用户昵称",prop:"nickname"},{default:o(()=>[l(s,{modelValue:e.value.nickname,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.nickname=t)},null,8,["modelValue"])]),_:1}),l(m,{label:"用户邮箱",prop:"email"},{default:o(()=>[l(s,{modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.email=t)},null,8,["modelValue"])]),_:1}),l(m,null,{default:o(()=>[l(d,{type:"primary",onClick:a[3]||(a[3]=t=>p("提交"))},{default:o(()=>[f("提交")]),_:1}),l(d,{type:"danger",onClick:a[4]||(a[4]=t=>p("重置"))},{default:o(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}};export{D as default};
