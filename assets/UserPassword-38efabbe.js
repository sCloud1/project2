import{_ as c}from"./PageItem-92dc55ee.js";import{A as E,t as V,q as n,o as x,a as U,w as t,v as o,x as _,bZ as y,E as F}from"./index-d78cd1ea.js";import{E as k,a as q}from"./el-form-item-c2153231.js";import{E as I}from"./plugin-vueexport-helper-f207eb5f.js";import{E as B}from"./el-input-8390a414.js";import"./baseClone-10758ba4.js";const $={__name:"UserPassword",setup(C){const d=E(),i=V(),r=n({old_pwd:"",new_pwd:"",re_pwd:""}),w=n({old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"},{validator:(p,e,l)=>{e===r.value.old_pwd?l(new Error("新密码不能和原密码相同")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"},{validator:(p,e,l)=>{e!==r.value.new_pwd?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"}]}),u=n(null),f=async()=>{await u.value.validate(),await y(r.value),F.success("密码修改成功，正在前往登录页"),d.clearToken(),d.clearUserInfo(),i.push("/login")},g=()=>{u.value.resetFields()};return(p,e)=>{const l=B,s=k,m=I,v=q,b=c;return x(),U(b,{title:"修改密码"},{content:t(()=>[o(v,{model:r.value,rules:w.value,ref_key:"formRef",ref:u,"label-width":"100px"},{default:t(()=>[o(s,{label:"原密码",prop:"old_pwd"},{default:t(()=>[o(l,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,{label:"新密码",prop:"new_pwd"},{default:t(()=>[o(l,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,{label:"确认密码",prop:"re_pwd"},{default:t(()=>[o(l,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,null,{default:t(()=>[o(m,{type:"primary",onClick:e[3]||(e[3]=a=>f("form"))},{default:t(()=>[_("修改密码")]),_:1}),o(m,{onClick:e[4]||(e[4]=a=>g("form"))},{default:t(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}};export{$ as default};
